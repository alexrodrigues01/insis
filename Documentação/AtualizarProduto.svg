<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="635px" preserveAspectRatio="none" style="width:990px;height:635px;background:#FFFFFF;" version="1.1" viewBox="0 0 990 635" width="990px" zoomAndPan="magnify"><defs><filter height="300%" id="f1k893cswdbr4u" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="623.4434" style="stroke:#A80036;stroke-width:1.0;" width="741.5" x="242.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="572.25" y="20.0283">ProductsPost</text><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="397.6191" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306" y="125.2031"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="229.4551" style="stroke:#A80036;stroke-width:1.0;" width="10" x="492" y="156.4941"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="61.291" style="stroke:#A80036;stroke-width:1.0;" width="10" x="675" y="187.7852"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="61.291" style="stroke:#A80036;stroke-width:1.0;" width="10" x="675" y="324.6582"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="803" y="219.0762"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="803" y="355.9492"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="916.5" y="461.5313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="98" x2="98" y1="91.9121" y2="540.8223"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="310.5" x2="310.5" y1="91.9121" y2="540.8223"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="497" x2="497" y1="91.9121" y2="540.8223"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="679.5" x2="679.5" y1="91.9121" y2="540.8223"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="808" x2="808" y1="91.9121" y2="540.8223"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="921" x2="921" y1="91.9121" y2="540.8223"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="5" y="88.3984">Anonymous_RegisteredUser</text><ellipse cx="98" cy="16.291" fill="#FEFECE" filter="url(#f1k893cswdbr4u)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M98,24.291 L98,51.291 M85,32.291 L111,32.291 M98,51.291 L85,66.291 M98,51.291 L111,66.291 " fill="none" filter="url(#f1k893cswdbr4u)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="5" y="554.9297">Anonymous_RegisteredUser</text><ellipse cx="98" cy="568.4434" fill="#FEFECE" filter="url(#f1k893cswdbr4u)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M98,576.4434 L98,603.4434 M85,584.4434 L111,584.4434 M98,603.4434 L85,618.4434 M98,603.4434 L111,618.4434 " fill="none" filter="url(#f1k893cswdbr4u)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1k893cswdbr4u)" height="32.6211" style="stroke:#A80036;stroke-width:1.5;" width="125" x="246.5" y="54.291"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="253.5" y="76.3984">ProductController</text><rect fill="#FEFECE" filter="url(#f1k893cswdbr4u)" height="32.6211" style="stroke:#A80036;stroke-width:1.5;" width="125" x="246.5" y="539.8223"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="253.5" y="561.9297">ProductController</text><rect fill="#FEFECE" filter="url(#f1k893cswdbr4u)" height="32.6211" style="stroke:#A80036;stroke-width:1.5;" width="110" x="440" y="54.291"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="447" y="76.3984">ProductService</text><rect fill="#FEFECE" filter="url(#f1k893cswdbr4u)" height="32.6211" style="stroke:#A80036;stroke-width:1.5;" width="110" x="440" y="539.8223"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="447" y="561.9297">ProductService</text><rect fill="#FEFECE" filter="url(#f1k893cswdbr4u)" height="32.6211" style="stroke:#A80036;stroke-width:1.5;" width="97" x="629.5" y="54.291"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="636.5" y="76.3984">ProductRepo</text><rect fill="#FEFECE" filter="url(#f1k893cswdbr4u)" height="32.6211" style="stroke:#A80036;stroke-width:1.5;" width="97" x="629.5" y="539.8223"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="636.5" y="561.9297">ProductRepo</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="763" y="88.3984">ProductsPost</text><path d="M790,37.291 C790,27.291 808,27.291 808,27.291 C808,27.291 826,27.291 826,37.291 L826,63.291 C826,73.291 808,73.291 808,73.291 C808,73.291 790,73.291 790,63.291 L790,37.291 " fill="#FEFECE" filter="url(#f1k893cswdbr4u)" style="stroke:#000000;stroke-width:1.5;"/><path d="M790,37.291 C790,47.291 808,47.291 808,47.291 C808,47.291 826,47.291 826,37.291 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="763" y="554.9297">ProductsPost</text><path d="M790,568.4434 C790,558.4434 808,558.4434 808,558.4434 C808,558.4434 826,558.4434 826,568.4434 L826,594.4434 C826,604.4434 808,604.4434 808,604.4434 C808,604.4434 790,604.4434 790,594.4434 L790,568.4434 " fill="#FEFECE" filter="url(#f1k893cswdbr4u)" style="stroke:#000000;stroke-width:1.5;"/><path d="M790,568.4434 C790,578.4434 808,578.4434 808,578.4434 C808,578.4434 826,578.4434 826,568.4434 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1k893cswdbr4u)" height="32.6211" style="stroke:#A80036;stroke-width:1.5;" width="113" x="863" y="54.291"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="870" y="76.3984">MessageBroker</text><rect fill="#FEFECE" filter="url(#f1k893cswdbr4u)" height="32.6211" style="stroke:#A80036;stroke-width:1.5;" width="113" x="863" y="539.8223"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="870" y="561.9297">MessageBroker</text><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="397.6191" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306" y="125.2031"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="229.4551" style="stroke:#A80036;stroke-width:1.0;" width="10" x="492" y="156.4941"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="61.291" style="stroke:#A80036;stroke-width:1.0;" width="10" x="675" y="187.7852"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="61.291" style="stroke:#A80036;stroke-width:1.0;" width="10" x="675" y="324.6582"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="803" y="219.0762"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="803" y="355.9492"/><rect fill="#FFFFFF" filter="url(#f1k893cswdbr4u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="916.5" y="461.5313"/><polygon fill="#A80036" points="294,121.2031,304,125.2031,294,129.2031,298,125.2031" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="98" x2="300" y1="125.2031" y2="125.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="105" y="119.9404">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="116" y="119.9404">PATCH /sku</text><polygon fill="#A80036" points="480,152.4941,490,156.4941,480,160.4941,484,156.4941" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="486" y1="156.4941" y2="156.4941"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="323" y="151.2314">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="334" y="151.2314">updateBySku(sku)</text><polygon fill="#A80036" points="663,183.7852,673,187.7852,663,191.7852,667,187.7852" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="502" x2="669" y1="187.7852" y2="187.7852"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="509" y="182.5225">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="520" y="182.5225">product= findBySku(sku)</text><polygon fill="#A80036" points="791,215.0762,801,219.0762,791,223.0762,795,219.0762" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="685" x2="797" y1="219.0762" y2="219.0762"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="692" y="213.8135">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="703" y="213.8135">findBySku(sku)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="502" x2="544" y1="280.3672" y2="280.3672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="544" x2="544" y1="280.3672" y2="293.3672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="503" x2="544" y1="293.3672" y2="293.3672"/><polygon fill="#A80036" points="513,289.3672,503,293.3672,513,297.3672,509,293.3672" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="509" y="275.1045">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="520" y="275.1045">updateProduct(product)</text><polygon fill="#A80036" points="663,320.6582,673,324.6582,663,328.6582,667,324.6582" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="502" x2="669" y1="324.6582" y2="324.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="509" y="319.3955">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="520" y="319.3955">save(product)</text><polygon fill="#A80036" points="791,351.9492,801,355.9492,791,359.9492,795,355.9492" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="685" x2="797" y1="355.9492" y2="355.9492"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="692" y="350.6865">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="703" y="350.6865">save()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="358" y1="417.2402" y2="417.2402"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358" x2="358" y1="417.2402" y2="430.2402"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317" x2="358" y1="430.2402" y2="430.2402"/><polygon fill="#A80036" points="327,426.2402,317,430.2402,327,434.2402,323,430.2402" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="323" y="411.9775">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="334" y="411.9775">new event(update,product)</text><polygon fill="#A80036" points="904.5,457.5313,914.5,461.5313,904.5,465.5313,908.5,461.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="910.5" y1="461.5313" y2="461.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="323" y="456.2686">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="334" y="456.2686">sendMessage(event)</text><polygon fill="#A80036" points="109,518.8223,99,522.8223,109,526.8223,105,522.8223" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="103" x2="310" y1="522.8223" y2="522.8223"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="115" y="517.5596">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="133" y="517.5596">Retorna o produto atualizado</text><!--MD5=[9d00aa28b8eb9fc543c61c3dd88c38cb]
@startuml
'https://plantuml.com/sequence-diagram

autonumber
actor Anonymous_RegisteredUser as USER
box "ProductsPost"
participant "ProductController" as CTRL
participant "ProductService" as SERV
participant "ProductRepo" as REPO
database "ProductsPost" as DB
participant "MessageBroker" as MSG

USER -> CTRL : PATCH /sku
activate CTRL
    CTRL-> SERV : updateBySku(sku)
    activate SERV
        SERV -> REPO: product= findBySku(sku)
                activate REPO
                    REPO -> DB : findBySku(sku)
                    activate DB
                    deactivate DB
                deactivate REPO
        SERV -> SERV : updateProduct(product)
        SERV -> REPO : save(product)
                        activate REPO
                            REPO -> DB : save()
                                                activate DB
                                                deactivate DB
                        deactivate REPO
    deactivate SERV
            CTRL -> CTRL : new event(update,product)
            CTRL -> MSG : sendMessage(event)
                activate MSG
                deactivate MSG
CTRL - -> USER : Retorna o produto atualizado
deactivate CTRL
@enduml

@startuml

autonumber
actor Anonymous_RegisteredUser as USER
box "ProductsPost"
participant "ProductController" as CTRL
participant "ProductService" as SERV
participant "ProductRepo" as REPO
database "ProductsPost" as DB
participant "MessageBroker" as MSG

USER -> CTRL : PATCH /sku
activate CTRL
    CTRL-> SERV : updateBySku(sku)
    activate SERV
        SERV -> REPO: product= findBySku(sku)
                activate REPO
                    REPO -> DB : findBySku(sku)
                    activate DB
                    deactivate DB
                deactivate REPO
        SERV -> SERV : updateProduct(product)
        SERV -> REPO : save(product)
                        activate REPO
                            REPO -> DB : save()
                                                activate DB
                                                deactivate DB
                        deactivate REPO
    deactivate SERV
            CTRL -> CTRL : new event(update,product)
            CTRL -> MSG : sendMessage(event)
                activate MSG
                deactivate MSG
CTRL - -> USER : Retorna o produto atualizado
deactivate CTRL
@enduml

PlantUML version 1.2021.11(Sat Oct 02 14:26:11 WEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>